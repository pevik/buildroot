From 784a67cb339cc43db86a676de00b51cb4101d1d6 Mon Sep 17 00:00:00 2001
From: Arfrever Frehtes Taifersar Arahesis <Arfrever@Apache.Org>
Date: Mon, 1 Apr 2019 00:30:20 +0000
Subject: [PATCH] build-sys: make setcap-setuid.sh respect ${DESTDIR}

Reference: https://github.com/iputils/iputils/issues/175
---
 build-aux/setcap-setuid.sh | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/build-aux/setcap-setuid.sh b/build-aux/setcap-setuid.sh
index f317a22..f832978 100755
--- a/build-aux/setcap-setuid.sh
+++ b/build-aux/setcap-setuid.sh
@@ -6,6 +6,10 @@ exec_path="$1/$2"
 perm_type="$3"
 setcap="$4"
 
+if [ -n "${DESTDIR}" ]; then
+	exec_path="${DESTDIR%/}/${exec_path}"
+fi
+
 case "$perm_type" in
 	'caps')
 		echo "$0: calling: $setcap cap_net_raw+ep $exec_path"
-- 
2.21.0

